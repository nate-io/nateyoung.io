---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import PageContentWrapper from '../../components/PageContentWrapper/PageContentWrapper.astro';

const posts = await getCollection('blog');
posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="Nate Young | Blog">
  <PageContentWrapper>
    <div class="py-12">
      <h1 class="text-4xl font-bold mb-12">Blog</h1>
      
      <div class="space-y-10">
        {posts.map(post => (
          <article class="bg-dark-gray rounded-lg p-6 hover:shadow-lg transition-all">
            <h2 class="text-2xl font-bold mb-2">
              <a href={`/blog/${post.slug}`} class="hover:text-netflix-red transition-colors">
                {post.data.title}
              </a>
            </h2>
            <div class="flex items-center text-light-gray text-sm mb-4">
              <span>
                {post.data.pubDate.toLocaleDateString('en-US', {
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric'
                })}
              </span>
              <span class="mx-2">•</span>
              <span>{post.data.author}</span>
            </div>
            <p class="text-light-gray mb-4">{post.data.description}</p>
            <div class="flex flex-wrap gap-2 mb-4">
              {post.data.tags.map(tag => (
                <span class="text-xs bg-medium-gray text-white px-2 py-1 rounded">{tag}</span>
              ))}
            </div>
            <a href={`/blog/${post.slug}`} class="text-highlight-blue hover:underline">
              Read more →
            </a>
          </article>
        ))}
      </div>
    </div>
  </PageContentWrapper>
</BaseLayout>
